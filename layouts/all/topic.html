{{ define "main" }}
<div class="medium-feed">
  {{ $topic := .Params.topic }}
  <section class="home-hero">
    <h1>{{ $topic }}</h1>
    <p>{{ $topic }} 카테고리 포스트 모음</p>
  </section>

  {{ $posts := where (where site.RegularPages "Section" "posts") "Params.categories" "intersect" (slice $topic) }}
  {{ $sorted := $posts.ByDate.Reverse }}

  {{ if gt (len $sorted) 0 }}
    {{ range $sorted }}
      <article class="post-entry">
        <header class="entry-header">
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
        </header>
        <div class="entry-content">
          {{ with .Summary }}<p>{{ . }}</p>{{ else }}<p>{{ .Plain | truncate 190 }}</p>{{ end }}
        </div>
        <footer class="entry-footer">
          <span>{{ .Date | time.Format "2006-01-02" }}</span>
          {{ with .Params.categories }}
            <span> · {{ delimit . ", " }}</span>
          {{ end }}
        </footer>
      </article>
    {{ end }}
  {{ else }}
    <p>아직 {{ $topic }} 카테고리 포스트가 없습니다.</p>
  {{ end }}
</div>
{{ end }}
